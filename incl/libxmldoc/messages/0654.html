<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<title>XML: Re: [xml] Adding implied P tags?</title>
<meta name="Author" content="Daniel Veillard (Daniel.Veillard@w3.org)">
<meta name="Subject" content="Re: [xml] Adding implied P tags?">
<link rev="made" href="mailto:veillard@w3.org">
</head>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<h1>Re: [xml] Adding implied P tags?</h1>
<!-- received="Thu Aug 17 06:50:26 2000" -->
<!-- isoreceived="20000817105026" -->
<!-- sent="Thu, 17 Aug 2000 11:47:36 +0200" -->
<!-- isosent="20000817094736" -->
<!-- name="Daniel Veillard" -->
<!-- email="Daniel.Veillard@w3.org" -->
<!-- subject="Re: [xml] Adding implied P tags?" -->
<!-- id="20000817114736.A8147@w3.org" -->
<!-- inreplyto="Pine.LNX.4.21.0008152028340.14201-100000@phong.blorf.net" -->
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
<th><a href="author.html">Author view</a></th>
</tr>
</table>
</div>
<p>
<strong>From:</strong> Daniel Veillard (<a href="mailto:Daniel.Veillard@w3.org?subject=Re:%20[xml]%20Adding%20implied%20P%20tags?"><em>Daniel.Veillard@w3.org</em></a>)<br>
<strong>Date:</strong> Thu Aug 17 2000 - 05:47:36 EDT
<p>
<!-- next="start" -->
<ul>
<li><strong>Previous message:</strong> <a href="0653.html">Kenneth Pronovici: "[xml] Generating XML including &lt;!DOCTYPE&gt; external reference"</a>
<li><strong>In reply to:</strong> <a href="0650.html">Wayne Davison: "[xml] Adding implied P tags?"</a>
<!-- nextthread="start" -->
<!-- reply="end" -->
</ul>
<hr noshade><p>
<!-- body="start" -->
<p>
On Tue, Aug 15, 2000 at 08:56:33PM -0700, Wayne Davison wrote:
<br>
<em>&gt; 
</em><br>
<em>&gt; I ran the following HTML page through &quot;testHTML --sax&quot; to see how well
</em><br>
<em>&gt; the inferred tags were doing:
</em><br>
<em>&gt; 
</em><br>
<em>&gt;   &lt;title&gt;This is a test!&lt;/title&gt;
</em><br>
<em>&gt;   Start of the body (hopefully).
</em><br>
<em>&gt;   &lt;hr size=1 noshade width=&quot;50%&quot;&gt;
</em><br>
<em>&gt;   This is a new paragraph.
</em><br>
<em>&gt;   &lt;br&gt;
</em><br>
<em>&gt;   A new line.
</em><br>
<em>&gt; 
</em><br>
<em>&gt; I noticed that the &quot;Start ...&quot; text was placed inside the inferred
</em><br>
<em>&gt; HEAD section (with the inferred BODY section starting with the HR
</em><br>
<em>&gt; tag).  If I manually add a P tag before the word &quot;Start&quot;, the HEAD &amp;
</em><br>
<em>&gt; BODY tags gets put into the right place, an inferred close-P tag gets
</em><br>
<em>&gt; put in front of the HR tag, but no new P tag gets opened up after the
</em><br>
<em>&gt; &lt;HR&gt; (prior to the word &quot;This&quot;).
</em><br>
<em>&gt; 
</em><br>
<em>&gt; So, is the plan to put implied P tags into the document? Or leave them
</em><br>
<em>&gt; out?  If they're going in, that should neatly solve the HEAD/BODY
</em><br>
<em>&gt; boundary problem (since the implied tag would naturally cause the start
</em><br>
<em>&gt; of the BODY section to occur).  If they're not going in, we'll want to
</em><br>
<em>&gt; have the character-string code check to ensure that it is at least in
</em><br>
<em>&gt; the body already (when it is not inside a HEAD-compatible container
</em><br>
<em>&gt; tag).
</em><br>
<p>&nbsp;&nbsp;Makes sense to do those kind of checks. I added some preliminary
<br>
code to handle auto-opening of &lt;p&gt; tags.
<br>
Current result on the same input gives:
<br>
&nbsp;&nbsp;
<br>
~/XML -&gt; cat auto.html 
<br>
&lt;title&gt;This is a test!&lt;/title&gt;
<br>
Start of the body (hopefully).
<br>
&lt;hr size=1 noshade width=&quot;50%&quot;&gt;
<br>
This is a new paragraph.
<br>
&lt;br&gt;
<br>
A new line.
<br>
&lt;h1&gt;header&lt;/h1&gt;
<br>
and a new line
<br>
~/XML -&gt; ./testHTML auto.html 
<br>
&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.0 Transitional//EN&quot; &quot;<a href="http://www.w3.org/TR/REC-html40/loose.dtd">http://www.w3.org/TR/REC-html40/loose.dtd</a>&quot;&gt;
<br>
&lt;html&gt;
<br>
&lt;head&gt;&lt;title&gt;This is a test!&lt;/title&gt;&lt;/head&gt;
<br>
&lt;body&gt;
<br>
&lt;p&gt;
<br>
Start of the body (hopefully).
<br>
&lt;/p&gt;
<br>
&lt;hr size=&quot;1&quot; noshade width=&quot;50%&quot;&gt;
<br>
&lt;p&gt;
<br>
This is a new paragraph.
<br>
&lt;br&gt;
<br>
A new line.
<br>
&lt;/p&gt;
<br>
&lt;h1&gt;header&lt;/h1&gt;
<br>
&lt;p&gt;
<br>
and a new line
<br>
&lt;/p&gt;
<br>
&lt;/body&gt;
<br>
&lt;/html&gt;
<br>
~/XML -&gt; 
<br>
<p>&nbsp;&nbsp;i.e the p gets opened, and the body get closed. If one add an
<br>
H1, the autogenerated p get closed and a new one is opened after
<br>
H1 closure.
<br>
<p>However, this is unclear how deep one should go in this direction,
<br>
there is two conflicting goals:
<br>
&nbsp;&nbsp;&nbsp;- try to get &quot;valid&quot; (in the XML sense) input, and this imply adding
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elements and modifying the structure of what is the input document
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(when it has any structure at all :-\)
<br>
&nbsp;&nbsp;&nbsp;- try to provide a set of SAX callbacks (or a DOM tree representation)
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;as close as possible from the input
<br>
&nbsp;
<br>
&nbsp;The former direction generally makes the work of upper layers simpler
<br>
but but lower the accuracy of the representation of the original document
<br>
making some potential &quot;tricks&quot; nearly impossible (never forget the existence
<br>
of tidy tool from Dave Raggett&quot; see <a href="http://www.w3.org/Status">http://www.w3.org/Status</a> for pointers)
<br>
<p>&nbsp;Let's consider the case of 
<br>
&nbsp;&nbsp;&nbsp;&lt;li&gt;some text&gt;&lt;/li&gt;
<br>
assuming (I can't check I'm on a plane without the HTML DtD) one should
<br>
theorically imply a &lt;p&gt; to encapsulate the text, it is well known that 
<br>
the rendering of &lt;li&gt;&lt;p&gt;some text&lt;/li&gt; is actually different. Same goes
<br>
for &lt;li&gt; witout an enclosing list item. Suppose I automatically add a 
<br>
&lt;ul&gt; definition for &quot;orphans&quot; li, it makes impossible to build HTML
<br>
rendering conformant not to the HTML DtD but to the &quot;usual&quot; rendering
<br>
that people seems to have considered the standard since some HTML3
<br>
implementation.
<br>
&nbsp;&nbsp;Anyway there is obvious context cases where &lt;p&gt; should be implied
<br>
you pinpointed the /html/body case, /html or / are also good candidates.
<br>
I have have added basic support for it (and will commit once landed)
<br>
one may want to add a few extra tag for auto-opening of &lt;p&gt; tags
<br>
(check htmlNoContentElements in HTMLparser.c) 
<br>
<p>&nbsp;&nbsp;I dunno how far should one go in the direction of cleaning
<br>
up at parsing time the HTML input. Amaya and Tidy makes quite a
<br>
lot of work in this direction, I dunno what the libxml HTML users
<br>
think ? Total cleanup is also hard to implement and I'm unsure
<br>
that it is actually what the libxml community ask for.
<br>
&nbsp;&nbsp;Feedback welcome on this topic,
<br>
<p>Daniel
<br>
<p><pre>
-- 
<a href="mailto:Daniel.Veillard@w3.org?subject=Re:%20[xml]%20Adding%20implied%20P%20tags?">Daniel.Veillard@w3.org</a> | W3C, INRIA Rhone-Alpes  | Today's Bookmarks :
Tel : +33 476 615 257  | 655, avenue de l'Europe | Linux XML libxml WWW
Fax : +33 476 615 207  | 38330 Montbonnot FRANCE | Gnome rpm2html rpmfind
 <a href="http://www.w3.org/People/all#veillard%40w3.org">http://www.w3.org/People/all#veillard%40w3.org</a>  | RPM badminton Kaffe
----
Message from the list <a href="mailto:xml@xmlsoft.org?subject=Re:%20[xml]%20Adding%20implied%20P%20tags?">xml@xmlsoft.org</a>
Archived at : <a href="http://xmlsoft.org/messages/">http://xmlsoft.org/messages/</a>
to unsubscribe: echo &quot;unsubscribe xml&quot; | mail  <a href="mailto:majordomo@xmlsoft.org?subject=Re:%20[xml]%20Adding%20implied%20P%20tags?">majordomo@xmlsoft.org</a>
</pre>
<p><!-- body="end" -->
<hr noshade>
<ul>
<!-- next="start" -->
<li><strong>Previous message:</strong> <a href="0653.html">Kenneth Pronovici: "[xml] Generating XML including &lt;!DOCTYPE&gt; external reference"</a>
<li><strong>In reply to:</strong> <a href="0650.html">Wayne Davison: "[xml] Adding implied P tags?"</a>
<!-- nextthread="start" -->
<!-- reply="end" -->
</ul>
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
<th><a href="author.html">Author view</a></th>
</tr>
</table>
</div>
<!-- trailer="footer" -->
<p>
<small>
<em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2b29</a> 
: <em>Thu Aug 17 2000 - 09:43:14 EDT</em>
</em>
</small>
</body>
</html>
