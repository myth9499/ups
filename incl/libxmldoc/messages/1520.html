<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<title>XML: [xml] Some words about libxslt</title>
<meta name="Author" content="Tom . (ptittom@free.fr)">
<meta name="Subject" content="[xml] Some words about libxslt">
<link rev="made" href="mailto:veillard@w3.org">
</head>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<h1>[xml] Some words about libxslt</h1>
<!-- received="Mon Mar  5 08:34:58 2001" -->
<!-- isoreceived="20010305133458" -->
<!-- sent="Mon, 5 Mar 2001 14:35:47 +0100" -->
<!-- isosent="20010305133547" -->
<!-- name="Tom ." -->
<!-- email="ptittom@free.fr" -->
<!-- subject="[xml] Some words about libxslt" -->
<!-- id="20010305143547.A414@debian" -->
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
<th><a href="author.html">Author view</a></th>
</tr>
</table>
</div>
<p>
<strong>From:</strong> Tom . (<a href="mailto:ptittom@free.fr?subject=Re:%20[xml]%20Some%20words%20about%20libxslt"><em>ptittom@free.fr</em></a>)<br>
<strong>Date:</strong> Mon Mar 05 2001 - 08:35:47 EST
<p>
<!-- next="start" -->
<ul>
<li><strong>Previous message:</strong> <a href="1519.html">Robert: "[xml] xsl:strip-space bug"</a>
<!-- nextthread="start" -->
<!-- reply="end" -->
</ul>
<hr noshade><p>
<!-- body="start" -->
<p>
Hi,
<br>
Here are some notes about XPath/XSLT functions in libxslt.
<br>
<p>In xsltDocumentFunction, the problem with XPointer could have been solved
<br>
with some kind of &quot;Simple API for XPath/XPtr/XSLT&quot; as I earlier suggested
<br>
it : whether an XPtrExpr returns a location set or a node-set can be
<br>
guessed by its syntax (if it uses the range, range-inside, start-point,
<br>
end-point, range-to or string-range functions) ; using a &quot;plugable&quot; API
<br>
similar to the SAX one allows you to handle expressions differently without
<br>
having to write another parser. I'm writing such an API and will keep you
<br>
informed. Another solution should be to evaluate the XPointer expression
<br>
and test the result type.
<br>
<p>In xsltKeyFunction, the &quot;TODO: find uri when qualified name&quot; is, I guess,
<br>
just a call to xmlXPathNsLookup to add, isn't it?
<br>
The TODO &quot;handle NODE set as 2nd args of key()&quot; should be very easy to
<br>
solve. It's basically the same as the id() function when passing a node-set
<br>
argument.
<br>
<p>There is a problem in xsltSystemPropertyFunction : you don't use QNames.
<br>
The Rec says &quot;version&quot;, &quot;vendor&quot; and &quot;vendor-url&quot; «are all in the XSLT
<br>
namespace&quot;. The &quot;xsl&quot; prefix in the Rec is just an understanding. If my
<br>
stylesheet binds the XSLT namespace URI to the &quot;foo&quot; prefix, I'll call
<br>
system-property with &quot;foo:version&quot;, not &quot;xsl:version&quot; since the &quot;xsl&quot;
<br>
prefix isn't necessary bound to the XSLT namespace. I also suggest using an
<br>
hash table to set and retrieve predefined and &quot;vendor-defined&quot; properties.
<br>
This hash table should be application-wide, not bound to each evaluation
<br>
context.
<br>
<p>In xsltFunctionAvailableFunction, it seems you just need to call
<br>
xmlXPathFunctionLookupNs after having expanded the prefix with
<br>
xmlXPathNsLookup.
<br>
<p>I'll try to provide some patch soon...
<br>
<p>Tom.
<br>
<pre>
----
Message from the list <a href="mailto:xml@rpmfind.net?subject=Re:%20[xml]%20Some%20words%20about%20libxslt">xml@rpmfind.net</a>
Archived at : <a href="http://xmlsoft.org/messages/">http://xmlsoft.org/messages/</a>
to unsubscribe: echo &quot;unsubscribe xml&quot; | mail  <a href="mailto:majordomo@rpmfind.net?subject=Re:%20[xml]%20Some%20words%20about%20libxslt">majordomo@rpmfind.net</a>
</pre>
<p><!-- body="end" -->
<hr noshade>
<ul>
<!-- next="start" -->
<li><strong>Previous message:</strong> <a href="1519.html">Robert: "[xml] xsl:strip-space bug"</a>
<!-- nextthread="start" -->
<!-- reply="end" -->
</ul>
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
<th><a href="author.html">Author view</a></th>
</tr>
</table>
</div>
<!-- trailer="footer" -->
<p>
<small>
<em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2b29</a> 
: <em>Mon Mar 05 2001 - 08:44:28 EST</em>
</em>
</small>
</body>
</html>
