<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<title>XML: Re: [xml] A need for a function</title>
<meta name="Author" content="Daniel Veillard (Daniel.Veillard@w3.org)">
<meta name="Subject" content="Re: [xml] A need for a function">
<link rev="made" href="mailto:veillard@w3.org">
</head>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<h1>Re: [xml] A need for a function</h1>
<!-- received="Mon Aug 28 07:12:25 2000" -->
<!-- isoreceived="20000828111225" -->
<!-- sent="Mon, 28 Aug 2000 16:10:43 +0200" -->
<!-- isosent="20000828141043" -->
<!-- name="Daniel Veillard" -->
<!-- email="Daniel.Veillard@w3.org" -->
<!-- subject="Re: [xml] A need for a function" -->
<!-- id="20000828161043.I15963@w3.org" -->
<!-- inreplyto="39AA6B1F.35F06772@wapit.com" -->
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
<th><a href="author.html">Author view</a></th>
</tr>
</table>
</div>
<p>
<strong>From:</strong> Daniel Veillard (<a href="mailto:Daniel.Veillard@w3.org?subject=Re:%20[xml]%20A%20need%20for%20a%20function"><em>Daniel.Veillard@w3.org</em></a>)<br>
<strong>Date:</strong> Mon Aug 28 2000 - 10:10:43 EDT
<p>
<!-- next="start" -->
<ul>
<li><strong>Next message:</strong> <a href="0690.html">Tuomas Luttinen: "Re: [xml] A need for a function"</a>
<li><strong>Previous message:</strong> <a href="0688.html">Tuomas Luttinen: "[xml] A need for a function"</a>
<li><strong>In reply to:</strong> <a href="0688.html">Tuomas Luttinen: "[xml] A need for a function"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="0690.html">Tuomas Luttinen: "Re: [xml] A need for a function"</a>
<li><strong>Reply:</strong> <a href="0690.html">Tuomas Luttinen: "Re: [xml] A need for a function"</a>
<!-- reply="end" -->
</ul>
<hr noshade><p>
<!-- body="start" -->
<p>
On Mon, Aug 28, 2000 at 04:37:35PM +0300, Tuomas Luttinen wrote:
<br>
<em>&gt; 
</em><br>
<em>&gt; I'm using libxml in a compiler that changes WML to bFrom <a href="mailto:xml-owner@rpmfind.net?subject=Re:%20[xml]%20A%20need%20for%20a%20function">xml-owner@rpmfind.net</a>  Mon Aug 28 07:12:25 2000
</em><br>
Received: (from majordomo@localhost)
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;by rpmfind.net (8.9.3/8.9.3) id HAA05949
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for xml-list; Mon, 28 Aug 2000 07:12:25 -0400
<br>
Resent-Date: Mon, 28 Aug 2000 07:12:25 -0400
<br>
Resent-Message-Id: &lt;<a href="mailto:200008281112.HAA05949@rpmfind.net?subject=Re:%20[xml]%20A%20need%20for%20a%20function">200008281112.HAA05949@rpmfind.net</a>&gt;
<br>
X-Authentication-Warning: rpmfind.net: majordomo set sender to <a href="mailto:xml-request@rufus.w3.org?subject=Re:%20[xml]%20A%20need%20for%20a%20function">xml-request@rufus.w3.org</a> using -f
<br>
Received: from tux.inrialpes.fr (IDENT:<a href="mailto:root@tux.inrialpes.fr?subject=Re:%20[xml]%20A%20need%20for%20a%20function">root@tux.inrialpes.fr</a> [194.199.20.134])
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;by rpmfind.net (8.9.3/8.9.3) with ESMTP id HAA05935
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for &lt;<a href="mailto:xml@xmlsoft.org?subject=Re:%20[xml]%20A%20need%20for%20a%20function">xml@xmlsoft.org</a>&gt;; Mon, 28 Aug 2000 07:12:22 -0400
<br>
Received: (from veillard@localhost)
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;by tux.inrialpes.fr (8.9.3/8.9.3) id QAA20982;
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Mon, 28 Aug 2000 16:10:43 +0200
<br>
Date: Mon, 28 Aug 2000 16:10:43 +0200
<br>
From: Daniel Veillard &lt;<a href="mailto:Daniel.Veillard@w3.org?subject=Re:%20[xml]%20A%20need%20for%20a%20function">Daniel.Veillard@w3.org</a>&gt;
<br>
To: <a href="mailto:xml@rpmfind.net?subject=Re:%20[xml]%20A%20need%20for%20a%20function">xml@rpmfind.net</a>
<br>
Cc: <a href="mailto:xml@xmlsoft.org?subject=Re:%20[xml]%20A%20need%20for%20a%20function">xml@xmlsoft.org</a>
<br>
Subject: Re: [xml] A need for a function
<br>
Message-ID: &lt;<a href="mailto:20000828161043.I15963@w3.org?subject=Re:%20[xml]%20A%20need%20for%20a%20function">20000828161043.I15963@w3.org</a>&gt;
<br>
References: &lt;<a href="mailto:39AA6B1F.35F06772@wapit.com?subject=Re:%20[xml]%20A%20need%20for%20a%20function">39AA6B1F.35F06772@wapit.com</a>&gt;
<br>
Mime-Version: 1.0
<br>
Content-Type: text/plain; charset=iso-8859-1
<br>
Content-Transfer-Encoding: 8bit
<br>
X-Mailer: Mutt 1.0.1i
<br>
In-Reply-To: &lt;<a href="mailto:39AA6B1F.35F06772@wapit.com?subject=Re:%20[xml]%20A%20need%20for%20a%20function">39AA6B1F.35F06772@wapit.com</a>&gt;; from <a href="mailto:tuo@wapit.com?subject=Re:%20[xml]%20A%20need%20for%20a%20function">tuo@wapit.com</a> on Mon, Aug 28, 2000 at 04:37:35PM +0300
<br>
Organization: World Wide Web Consortium (W3C <a href="http://www.w3.org/">http://www.w3.org/</a>)
<br>
Sender: <a href="mailto:xml-request@rufus.w3.org?subject=Re:%20[xml]%20A%20need%20for%20a%20function">xml-request@rufus.w3.org</a>
<br>
Precedence: list
<br>
Reply-To: <a href="mailto:xml@rpmfind.net?subject=Re:%20[xml]%20A%20need%20for%20a%20function">xml@rpmfind.net</a>
<br>
Errors-To: <a href="mailto:xml-error@rpmfind.net?subject=Re:%20[xml]%20A%20need%20for%20a%20function">xml-error@rpmfind.net</a>
<br>
X-loop: <a href="mailto:xml@rpmfind.net?subject=Re:%20[xml]%20A%20need%20for%20a%20function">xml@rpmfind.net</a>
<br>
X-mailing-list: <a href="mailto:xml@rpmfind.net?subject=Re:%20[xml]%20A%20need%20for%20a%20function">xml@rpmfind.net</a>
<br>
Resent-from: <a href="mailto:xml@rpmfind.net?subject=Re:%20[xml]%20A%20need%20for%20a%20function">xml@rpmfind.net</a>
<br>
<p><p>On Mon, Aug 28, 2000 at 04:37:35PM +0300, Tuomas Luttinen wrote:
<br>
<em>&gt; 
</em><br>
<em>&gt; I'm using libxml in a compiler that changes WML to binary format. 
</em><br>
<em>&gt; So the problem I face is that I'd need to get the content of the 
</em><br>
<em>&gt; next nodes in another character set than UTF-8 in time to time. 
</em><br>
<p>&nbsp;&nbsp;I don't understand. The XML specification is ver clear about
<br>
this, every entity has to be in a single encoding. You cannot
<br>
have one part say in UTF8 and another part in ISO-Latin-1 for
<br>
example, this would not be an XML document.
<br>
<p><em>&gt; With a brief look I got an impression that changing the character 
</em><br>
<em>&gt; set of the document would need saving the hole document, winary format. 
</em><br>
<em>&gt; So the problem I face is that I'd need to get the content of the 
</em><br>
<em>&gt; next nodes in another character set than UTF-8 in time to time. 
</em><br>
<p>&nbsp;&nbsp;I don't understand. The XML specification is ver clear about
<br>
this, every entity has to be in a single encoding. You cannot
<br>
have one part say in UTF8 and another part in ISO-Latin-1 for
<br>
example, this would not be an XML document.
<br>
<p><em>&gt; With a brief look I got an impression that changing the character 
</em><br>
<em>&gt; set of the document would need saving the hole document, which is 
</em><br>
<em>&gt; rather clumsy when fiddling with parts of the document in memory.
</em><br>
<p>&nbsp;&nbsp;So you already loaded the document, and everything is in memory.
<br>
Thus the initial document was XML (unless there is a bug in libxml).
<br>
What you want to do is translate this document into something else,
<br>
right ?
<br>
<p><em>&gt; So how about a general use function for changing the character set
</em><br>
<em>&gt; for a pure text string that could be called for content of a text node
</em><br>
<em>&gt; or name of an element etc?
</em><br>
<p>&nbsp;&nbsp;Which would need to force the DOM tree to add ohich is 
<br>
<em>&gt; rather clumsy when fiddling with parts of the document in memory.
</em><br>
<p>&nbsp;&nbsp;So you already loaded the document, and everything is in memory.
<br>
Thus the initial document was XML (unless there is a bug in libxml).
<br>
What you want to do is translate this document into something else,
<br>
right ?
<br>
<p><em>&gt; So how about a general use function for changing the character set
</em><br>
<em>&gt; for a pure text string that could be called for content of a text node
</em><br>
<em>&gt; or name of an element etc?
</em><br>
<p>&nbsp;&nbsp;Which would need to force the DOM tree to add one extra charset item
<br>
for each of those elements in the tree. People are already complaining
<br>
that the DOM generation is a bit heavy memory wise, I'm pretty sure
<br>
a lot of people would not be pleased with this, at all...
<br>
<p><em>&gt; The point being here that a couple hundred ä:s and ö:s etc can make a
</em><br>
<em>&gt; huge difference when marked with one versus several bytes when the 
</em><br>
<em>&gt; hole document must be 1400 bytes at maximum.
</em><br>
<p>&nbsp;&nbsp;I doubt you will gain much. I'm sure how much you will loose.
<br>
In the specific case of those values ene extra charset item
<br>
for each of those elements in the tree. People are already complaining
<br>
that the DOM generation is a bit heavy memory wise, I'm pretty sure
<br>
a lot of people would not be pleased with this, at all...
<br>
<p><em>&gt; The point being here that a couple hundred ä:s and ö:s etc can make a
</em><br>
<em>&gt; huge difference when marked with one versus several bytes when the 
</em><br>
<em>&gt; hole document must be 1400 bytes at maximum.
</em><br>
<p>&nbsp;&nbsp;I doubt you will gain much. I'm sure how much you will loose.
<br>
In the specific case of those values extracted from the ISO-Latin
<br>
set, the difference in encoding is 2 bytes instead of 1 byte.
<br>
&nbsp;&nbsp;Practically what you can do: 
<br>
&nbsp;&nbsp;&nbsp;&nbsp;- reuse the _private field defined for most objects, that's
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4 bytes where you could try to store informations, but
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;you won't be able to save the document with libxml native
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;functions.
<br>
&nbsp;&nbsp;&nbsp;&nbsp;- try to force libxml to store in the native encoding, there
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is a small paragraph at <a href="http://xmlsoft.org/encoding.html#extend">http://xmlsoft.org/encoding.html#extend</a>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;about this, but I suggest not to do this, oxtracted from the ISO-Latin
<br>
set, the difference in encoding is 2 bytes instead of 1 byte.
<br>
&nbsp;&nbsp;Practically what you can do: 
<br>
&nbsp;&nbsp;&nbsp;&nbsp;- reuse the _private field defined for most objects, that's
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4 bytes where you could try to store informations, but
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;you won't be able to save the document with libxml native
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;functions.
<br>
&nbsp;&nbsp;&nbsp;&nbsp;- try to force libxml to store in the native encoding, there
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is a small paragraph at <a href="http://xmlsoft.org/encoding.html#extend">http://xmlsoft.org/encoding.html#extend</a>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;about this, but I suggest not to do this, or make sure that
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;you don't violate any of the XML well formedness rules due
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to this trick (*) 
<br>
<p>&nbsp;&nbsp;&nbsp;I hope this helps,
<br>
<p>Daniel
<br>
<p>(*) WAP implementors have already being accused by the XML community
<br>
&nbsp;&nbsp;&nbsp;&nbsp;to violate Well Formedness rules of XML by defaulting to ISO-Latin-1
<br>
&nbsp;&nbsp;&nbsp;&nbsp;when no encoding was declared in the XML declaration, nor in the
<br>
&nbsp;&nbsp;&nbsp;&nbsp;HTTP headers. I would not be pleased if libxml was pointed as being
<br>
&nbsp;&nbsp;&nbsp;&nbsp;one of those lousy implementation. This was true in libxml1 but I
<br>
&nbsp;&nbsp;&nbsp;&nbsp;have tried to make sure that this got corrected in libxml2.
<br>
<p><pre>
-- 
<a href="mailto:Daniel.Veillard@w3.org?subject=Re:%20[xml]%20A%20need%20for%20a%20function">Daniel.Veillard@w3.org</a> | W3C, INRIA Rhone-Alpes  | Today's Bookmarks :
Tel : +33 476 615 257  | 655, avenue de l'Europe | Linux XML libxml WWW
Fax : +33 476 615 207  | 38330 Montbonnot FRANCE | Gnome rpm2html rpmfind
 <a href="http://www.w3.org/People/all#veillard%40w3.org">http://www.w3.org/People/all#veillard%40w3.org</a>  | RPM badminton Kaffe
----
Message from the list <a href="mailto:xml@xmlsoft.org?subject=Re:%20[xml]%20A%20need%20for%20a%20function">xml@xmlsoft.org</a>
Archived at : <a href="http://xmlsoft.org/messages/">http://xmlsoft.org/messages/</a>
to unsubscribe: echo &quot;unsubscribe xml&quot; | mail  <a href="mailto:majordomo@xmlsoft.org?subject=Re:%20[xml]%20A%20need%20for%20a%20function">majordomo@xmlsoft.org</a>
r make sure that
      you don't violate any of the XML well formedness rules due
      to this trick (*) 
<p>   I hope this helps,
<p>Daniel
<p>(*) WAP implementors have already being accused by the XML community
    to violate Well Formedness rules of XML by defaulting to ISO-Latin-1
    when no encoding was declared in the XML declaration, nor in the
    HTTP headers. I would not be pleased if libxml was pointed as being
    one of those lousy implementation. This was true in libxml1 but I
    have tried to make sure that this got corrected in libxml2.
<p>-- 
<a href="mailto:Daniel.Veillard@w3.org?subject=Re:%20[xml]%20A%20need%20for%20a%20function">Daniel.Veillard@w3.org</a> | W3C, INRIA Rhone-Alpes  | Today's Bookmarks :
Tel : +33 476 615 257  | 655, avenue de l'Europe | Linux XML libxml WWW
Fax : +33 476 615 207  | 38330 Montbonnot FRANCE | Gnome rpm2html rpmfind
 <a href="http://www.w3.org/People/all#veillard%40w3.org">http://www.w3.org/People/all#veillard%40w3.org</a>  | RPM badminton Kaffe
----
Message from the list <a href="mailto:xml@xmlsoft.org?subject=Re:%20[xml]%20A%20need%20for%20a%20function">xml@xmlsoft.org</a>
Archived at : <a href="http://xmlsoft.org/messages/">http://xmlsoft.org/messages/</a>
to unsubscribe: echo &quot;unsubscribe xml&quot; | mail  <a href="mailto:majordomo@xmlsoft.org?subject=Re:%20[xml]%20A%20need%20for%20a%20function">majordomo@xmlsoft.org</a>
</pre>
<p><!-- body="end" -->
<hr noshade>
<ul>
<!-- next="start" -->
<li><strong>Next message:</strong> <a href="0690.html">Tuomas Luttinen: "Re: [xml] A need for a function"</a>
<li><strong>Previous message:</strong> <a href="0688.html">Tuomas Luttinen: "[xml] A need for a function"</a>
<li><strong>In reply to:</strong> <a href="0688.html">Tuomas Luttinen: "[xml] A need for a function"</a>
<!-- nextthread="start" -->
<li><strong>Next in thread:</strong> <a href="0690.html">Tuomas Luttinen: "Re: [xml] A need for a function"</a>
<li><strong>Reply:</strong> <a href="0690.html">Tuomas Luttinen: "Re: [xml] A need for a function"</a>
<!-- reply="end" -->
</ul>
<div align="center">
<table border="2" width="100%">
<tr>
<th><a href="date.html">Date view</a></th>
<th><a href="index.html">Thread view</a></th>
<th><a href="subject.html">Subject view</a></th>
<th><a href="author.html">Author view</a></th>
</tr>
</table>
</div>
<!-- trailer="footer" -->
<p>
<small>
<em>
This archive was generated by <a href="http://www.hypermail.org/">hypermail 2b29</a> 
: <em>Mon Aug 28 2000 - 09:43:23 EDT</em>
</em>
</small>
</body>
</html>
